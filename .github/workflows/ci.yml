# .github/workflows/nodejs.yml
# üëÜ –≠—Ç–æ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É ‚Äî GitHub Actions –æ–∂–∏–¥–∞–µ—Ç workflows –≤ .github/workflows

name: Node.js CI
# üè∑ –ù–∞–∑–≤–∞–Ω–∏–µ workflow ‚Äî –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ GitHub –∫–∞–∫ "Node.js CI"

on:
  push:
    branches: [ main ]
    # üü¢ –ó–∞–ø—É—Å–∫–∞—Ç—å workflow –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main
  pull_request:
    branches: [ main ]
    # üîµ –¢–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ pull request –≤ main (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR)

jobs:
  build:
    runs-on: ubuntu-latest
    # ‚òÅÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É GitHub –Ω–∞ Ubuntu

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        # üì• –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ GitHub Runner

      - name: Use Node.js 22
        uses: actions/setup-node@v3
        with:
          node-version: '22'
          # üîß –®–∞–≥ 2: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Node.js –≤–µ—Ä—Å–∏–∏ 18 (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω—É—é)

      - name: Install dependencies
        run: npm install
        # üì¶ –®–∞–≥ 3: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ package.json

      - name: Lint code
        run: npm run lint
        # üîç –®–∞–≥ 4 (–ø–æ –∂–µ–ª–∞–Ω–∏—é): –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–æ–º (–µ—Å–ª–∏ –µ—Å—Ç—å npm script "lint")

      - name: Run unit tests
        run: npm run test
        # üß™ –®–∞–≥ 5: –ó–∞–ø—É—Å–∫–∞–µ–º unit-—Ç–µ—Å—Ç—ã (Jest –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ NestJS)

      # - name: Run e2e tests
      #   run: npm run test:e2e
      #   # üî∏ –≠—Ç–æ—Ç —à–∞–≥ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω, —Ç.–∫. —Ç—ã –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –ë–î
      #   # üî∏ –ö–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∏—à—å –±–∞–∑—É ‚Äî –º–æ–∂–Ω–æ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å

# ‚úÖ –í –∏—Ç–æ–≥–µ: –Ω–∞ –∫–∞–∂–¥—ã–π push/PR –≤ main ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!
